<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Interface - Farm to Table Restaurant</title>
    <link rel="stylesheet" href="../css/manager.css">
    <script src="../js/manager.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


</head>
<body>
    <header>
        <div class="logo">
            <h1></h1>
            <img src="../assets/logo.png" alt="Farm logo">
        </div>
        <nav>
            
            <ul class="nav-links">
    <li><a href="managerHome.html">Home</a></li>
    <li><a href="menu.html">Menu</a></li>
    <li><a href="employeeManagement.html">Employee</a></li>
    <li><a href="financial.html">Finance</a></li>

</ul>
</nav>

<button id="user" onclick="window.location.href='index.html';"><i class="fa-solid fa-user"></i>Log Out</button>


</header>
    <section class="employee-management">
        <h2>Employee Schedules</h2>
        <div class="add-employee">
            <button id="add-employee-btn"><i class="fas fa-plus"></i> Add Employee</button>
            
        </div>
        <table id="employee-schedules">
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                    <th>Saturday</th>
                    <th>Sunday</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <h2>Daily Report</h2>
        <table id="daily-report">
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Date</th>
                    <th>Start</th>
                    <th>End</th>
                    <th>Break</th>
                    <th>Work</th>
                    <th>Overtime</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <script>
        const employeeSchedulesData = [
            {
                name: "John Doe",
                schedule: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "8:00 AM - 4:00 PM",
                    "10:00 AM - 6:00 PM",
                    "2:00 PM - 10:00 PM",
                    "9:00 AM - 5:00 PM",
                    "1:00 PM - 9:00 PM",
                    "8:00 AM - 4:00 PM",
                    "10:00 AM - 6:00 PM",
                ],
            },
            {
                name: "Jane Smith",
                schedule: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "10:00 AM - 6:00 PM",
                    "8:00 AM - 4:00 PM",
                    "2:00 PM - 10:00 PM",
                    "8:00 AM - 4:00 PM",
                    "9:00 AM - 5:00 PM",
                    "9:00 AM - 5:00 PM",
                    "2:00 PM - 10:00 PM",
                ],
            },
            {
                name: "Michael Johnson",
                schedule: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "8:00 AM - 4:00 PM",
                    "1:00 PM - 9:00 PM",
                    "9:00 AM - 5:00 PM",
                    "2:00 PM - 10:00 PM",
                    "10:00 AM - 6:00 PM",
                    "8:00 AM - 4:00 PM",
                    "2:00 PM - 10:00 PM",
                ],
            },
            {
                name: "Susan Williams",
                schedule: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "2:00 PM - 10:00 PM",
                    "10:00 AM - 6:00 PM",
                    "9:00 AM - 5:00 PM",
                    "8:00 AM - 4:00 PM",
                    "8:00 AM - 4:00 PM",
                    "1:00 PM - 9:00 PM",
                    "9:00 AM - 5:00 PM",
                ],
            },
            {
                name: "Hanna Smith",
                schedule: ["Monday", "Wednesday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "8:30 AM - 4:30 PM",
                    "10:30 AM - 6:30 PM",
                    "3:30 PM - 11:30 PM",
                    "9:30 AM - 5:30 PM",
                    "1:30 PM - 9:30 PM",
                ],
            },
            {
                name: "Jordan Turner",
                schedule: ["Monday", "Tuesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "9:00 AM - 5:00 PM",
                    "7:30 AM - 3:30 PM",
                    "1:30 PM - 9:30 PM",
                    "8:00 AM - 4:00 PM",
                    "9:30 AM - 5:30 PM",
                    "10:00 AM - 6:00 PM",
                ],
            },
            {
                name: "Ethan Lewis",
                schedule: ["Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                workTime: [
                    "11:00 AM - 7:00 PM",
                    "10:30 AM - 6:30 PM",
                    "8:30 AM - 4:30 PM",
                    "9:00 AM - 5:00 PM",
                    "2:00 PM - 10:00 PM",
                    "11:30 AM - 7:30 PM",
                ],
            },
            {
                name: "Mary Taylor",
                schedule: ["Monday", "Wednesday", "Thursday", "Saturday", "Sunday"],
                workTime: [
                    "8:00 AM - 4:00 PM",
                    "2:00 PM - 10:00 PM",
                    "9:00 AM - 5:00 PM",
                    "10:30 AM - 6:30 PM",
                    "8:30 AM - 4:30 PM",
                ],
            },
            {
                name: "Olivia White",
                schedule: ["Tuesday", "Wednesday", "Thursday", "Friday", "Sunday"],
                workTime: [
                    "9:30 AM - 5:30 PM",
                    "8:00 AM - 4:00 PM",
                    "1:30 PM - 9:30 PM",
                    "7:30 AM - 3:30 PM",
                    "11:00 AM - 7:00 PM",
                ],
            },
            {
                name: "Jennifer Brown",
                schedule: ["Tuesday", "Wednesday", "Thursday", "Friday", "Sunday"],
                workTime: [
                    "10:30 AM - 4:30 PM",
                    "8:30 AM - 2:00 PM",
                    "1:30 PM - 9:30 PM",
                    "8:30 AM - 2:00 PM",
                    "11:00 AM - 6:00 PM",
                ],
            },
        ];

        const dailyReportData = [
            {
                name: "John Doe",
                date: "2023-10-30",
                start: "08:00 AM",
                end: "04:00 PM",
                break: "30 min",
                work: "7 hrs 30 min",
                overtime: "2 hrs 30 min"
            },
            {
                name: "Jane Smith",
                date: "2023-10-30",
                start: "09:15 AM",
                end: "05:15 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "2 hrs 30 min"
            },
            {
                name: "Michael Johnson",
                date: "2023-10-30",
                start: "10:10 AM",
                end: "06:15 PM",
                break: "30 min",
                work: "7 hrs 35 min",
                overtime: "-"
            },
            {
                name: "Susan Williams",
                date: "2023-10-30",
                start: "09:20 AM",
                end: "05:10 PM",
                break: "30 min",
                work: "7 hrs 20 min",
                overtime: "-"
            },
            {
                name: "Hanna Smith",
                date: "2023-10-30",
                start: "08:30 AM",
                end: "04:30 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "-"
            },
            {
                name: "Jordan Turner",
                date: "2023-10-30",
                start: "09:00 AM",
                end: "05:00 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "-"
            },
            {
                name: "Ethan Lewis",
                date: "2023-10-30",
                start: "11:00 AM",
                end: "07:00 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "-"
            },
            {
                name: "Mary Taylor",
                date: "2023-10-30",
                start: "08:00 AM",
                end: "04:00 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "-"
            },
            {
                name: "Olivia White",
                date: "2023-10-30",
                start: "09:30 AM",
                end: "05:30 PM",
                break: "30 min",
                work: "7 hrs",
                overtime: "-"
            },
            {
                name: "Jennifer Brown",
                date: "2023-10-30",
                start: "10:30 AM",
                end: "04:30 PM",
                break: "30 min",
                work: "6 hrs",
                overtime: "1 hr"
            }
        ];


        const employeeSchedulesTable = document.getElementById("employee-schedules");
        const dailyReportTable = document.getElementById("daily-report");
        const addEmployeeButton = document.getElementById("add-employee-btn");

        function populateEmployeeSchedules() {
            const daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
            const tbody = employeeSchedulesTable.querySelector("tbody");

            for (const employee of employeeSchedulesData) {
                const row = document.createElement("tr");
                row.innerHTML = `<td>${employee.name}</td>`;

                for (const day of daysOfWeek) {
                    const index = daysOfWeek.indexOf(day);
                    if (employee.schedule.includes(day)) {
                        const workTime = employee.workTime[index];
                        row.innerHTML += `<td>${workTime}</td>`;
                    } else {
                        row.innerHTML += "<td>-</td>";
                    }
                }

                

                row.innerHTML += `
            <td>
                <i class="fas fa-edit" onclick="editEmployeeRow(this)"></i>
                <i class="fas fa-trash-alt" onclick="removeEmployeeRow(this)"></i>
            </td>
        `;
        

        tbody.appendChild(row);
    }

}


addEmployeeButton.addEventListener('click', addEmployee);

function addEmployee() {
    const employeeName = prompt("Enter the employee's name:");
    if (employeeName) {
        const newEmployee = {
            name: employeeName,
            schedule: ["-", "-", "-", "-", "-", "-", "-"],
            workTime: ["-", "-", "-", "-", "-", "-", "-"],
        };
        employeeSchedulesData.push(newEmployee);
        populateEmployeeSchedules();
    }
}


    function editEmployeeRow(icon) {
        const row = icon.parentElement.parentElement;
        const cells = row.querySelectorAll('td');

        // Loop through the cells and enable inline editing for each cell
        for (let i = 1; i < cells.length - 1; i++) {
            enableInlineEdit(cells[i]);
        }

        // Change the icon and add a save button
        icon.classList.remove('fa-edit');
        icon.classList.add('fa-save');
        icon.removeEventListener('click', () => editEmployeeRow(icon));
        icon.addEventListener('click', () => saveEmployeeRow(icon));
    }

    function saveEmployeeRow(icon) {
        const row = icon.parentElement.parentElement;
        const cells = row.querySelectorAll('td');

        // Loop through the cells and save the edited values
        for (let i = 1; i < cells.length - 1; i++) {
            disableInlineEdit(cells[i]);
            const value = cells[i].innerText;
            employeeSchedulesData[row.rowIndex - 1].workTime[i - 1] = value;
        }

    
        icon.classList.remove('fa-save');
        icon.classList.add('fa-edit');
        icon.removeEventListener('click', () => saveEmployeeRow(icon));
        icon.addEventListener('click', () => editEmployeeRow(icon));
    }

    function enableInlineEdit(cell) {
        cell.contentEditable = 'true';
    }

    function disableInlineEdit(cell) {
        cell.contentEditable = 'false';
    }


    function removeEmployeeRow(button) {
    console.log("Remove button clicked.");
    const row = button.parentElement.parentElement;
    const rowIndex = row.rowIndex - 1; // Adjust for header row

    console.log("Row index to remove: " + rowIndex);

    const confirmDelete = confirm("Are you sure you want to remove this employee?");
    console.log("Confirm Delete: " + confirmDelete);

    if (confirmDelete) {
        employeeSchedulesData.splice(rowIndex, 1);
        console.log("Employee removed from the array.");
        populateEmployeeSchedules(); // Refresh the table
        console.log("Table refreshed.");
    } else {
        console.log("Employee removal canceled.");
    }
}


        function populateDailyReport() {
            for (const entry of dailyReportData) {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${entry.name}</td>
                    <td>${getCurrentDate()}</td>
                    <td>${entry.start}</td>
                    <td>${entry.end}</td>
                    <td>${entry.break}</td>
                    <td>${entry.work}</td>
                    <td>${entry.name === "James Anderson" || entry.name === "Jennifer Brown" ? entry.overtime : ""}</td>
                `;

                dailyReportTable.querySelector("tbody").appendChild(row);
            }
        }

        function getCurrentDate() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        populateEmployeeSchedules();
        populateDailyReport();
    </script>
</body>
</html>
